package aa.bb.exploiterjson;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.util.ArrayList;

public class MainActivity extends AppCompatActivity {
ListView lv;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        lv= findViewById(R.id.lvPharm);
        try {

            //récupération des données json

        String data ="[{\"quartier\":\"Riad\",\"nom\":\"Pharmacie Annasr\",\"para\":true},{\"quartier\":\"Yaakoub Al Manssour\",\"nom\":\"Pharmacie Al Abtal\",\"para\":false}]";


            JSONArray ja = new JSONArray(data);
            ArrayList<Pharmacie> lstPh = new ArrayList<>();
for (int i =0;i<ja.length();i++)
{
    JSONObject jo = ja.getJSONObject(i);
    Pharmacie P = new Pharmacie();
    P.setQuartier(jo.getString("quartier"));
    P.setNom(jo.getString("nom"));
    P.setPara(jo.getBoolean("para"));
    lstPh.add(P);
}

            ArrayAdapter<Pharmacie> AA = new ArrayAdapter<>(MainActivity.this, android.R.layout.simple_list_item_1,lstPh);

           lv.setAdapter(AA);



        } catch (Exception ex) {
            Log.e("infos" , ex.getMessage());
        }


    }
}